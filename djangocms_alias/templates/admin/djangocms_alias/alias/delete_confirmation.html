{% extends "admin/delete_confirmation.html" %}
{% load i18n admin_urls cms_tags djangocms_alias_tags %}

{% block breadcrumbs %}{% endblock %}

{% block content %}
<p>
  {% if perms_needed or protected %}
    {% blocktrans with escaped_object=object %}You don't have permissions to delete {{ object_name }} "{{ escaped_object }}". Please request your site admin to add permissions to delete alias, or delete alias from all places that it being used.{% endblocktrans %}
  {% else %}
    {% blocktrans with escaped_object=object %}Are you sure you want to delete the {{ object_name }} "{{ escaped_object }}"?{% endblocktrans %}
  {% endif %}
</p>

<br/>

{% if object.objects_using %}
  {% blocktrans with escaped_object=object %}This alias is used on this content:{% endblocktrans %}
  <ul>
      {% for item in object.objects_using %}
      <li>
          {% get_object_type item as object_type %}
          {{ object_type }}:

          <a href="{% if object_type == 'Alias' %}{% get_alias_url item %}{% else %}{% page_url item %}{% endif %}">{{ item }}</a>
          {% if object_type == 'Page' %}({% if item.publisher_is_draft %}Draft{% else %}Public{% endif %}){% endif %}
      </li>
      {% endfor %}
  </ul>
{% else %}
  {% blocktrans with escaped_object=object %}This alias wasn't used on any content.{% endblocktrans %}
{% endif %}

<form method="post">{% csrf_token %}
  <div>
    <input type="hidden" name="post" value="yes" />
    {% if not perms_needed and not protected and perm %}
      <input type="submit" value="{% trans "Yes, I'm sure" %}" />
    {% endif %}
    <a href="#" class="button cancel-link">{% trans "No, take me back" %}</a>
  </div>
</form>
{% endblock %}
